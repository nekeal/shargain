# Shargain Brownfield Enhancement PRD

## 1. Intro Project Analysis and Context

#### Existing Project Overview
*   **Analysis Source**: This PRD is based on the detailed technical analysis found in `docs/project-architecture.md`.
*   **Current Project State**: The project is a nearly complete offer notification system, currently in a closed beta. The immediate goal is to formalize the application, finalize MVP features, and prepare for a public launch and subsequent monetization.

#### Available Documentation Analysis
The `document-project` task has provided us with a solid baseline for technical documentation.
*   [x] Tech Stack Documentation
*   [x] Source Tree/Architecture
*   [x] API Documentation (via OpenAPI spec)
*   [ ] *Coding Standards (inferred from code, but not an explicit document)*
*   [ ] *External API Documentation (e.g., for Telegram)*
*   [ ] *UX/UI Guidelines*

#### Enhancement Scope Definition
*   **Enhancement Type**: This work can be classified as a **Major Feature Modification** and **UI/UX Overhaul** as we move from a private beta to a public-facing product.
*   **Enhancement Description**: The project is to take the existing closed-beta application, harden its features, polish the user experience, and add the necessary components for a public launch.
*   **Impact Assessment**: This will have a **Significant Impact**, as it will likely involve refactoring, hardening existing code, and adding new public-facing features.

#### Goals and Background Context
*   **Goals**:
    *   Successfully launch the application to the public.
    *   Achieve the initial user adoption and retention KPIs defined in the Project Brief.
    *   Establish a stable and scalable foundation for future monetization.
*   **Background Context**: The application has been developed to a near-complete state. This effort bridges the gap between a functional prototype and a polished, reliable, and marketable product ready for public use.

#### Change Log
| Change | Date | Version | Description | Author |
| :--- | :--- | :--- | :--- | :--- |
| Created | 2025-09-20 | 0.1 | Initial PRD draft | John (PM) |

## 2. Requirements

#### Functional Requirements
1.  **FR1**: Users must be able to register for an account and log in via the web interface using an email and password.
2.  **FR2**: Authenticated users must be able to add, view, and delete URLs to be scraped from the curated list of supported platforms (OLX, Vinted, Otomoto, Otodom).
3.  **FR3**: The system must poll the tracked URLs at a frequent, system-determined interval.
4.  **FR4**: When a new offer is detected, the system must send a notification to the user's connected Telegram account.
5.  **FR5**: Users must be able to connect their Telegram account to their web account to enable notifications.

#### Non-Functional Requirements
1.  **NFR1**: The web application must be responsive and provide a seamless user experience on modern desktop and mobile browsers.
2.  **NFR2**: The end-to-end notification latency (from offer detection to user receipt) should be **under 10 minutes** for 95% of notifications.
3.  **NFR3**: The system architecture must be scalable to support at least 100 concurrent users and 1,000 active tracked URLs during the initial launch phase.
4.  **NFR4**: All user data, particularly passwords and personal information, must be stored securely, following industry best practices.

#### Compatibility Requirements
1.  **CR1**: The backend REST API must maintain compatibility with the frontend client generated by `openapi-ts`.
2.  **CR2**: The application must remain compatible with the latest stable versions of PostgreSQL and Django.
3.  **CR3**: The UI/UX of all new and modified features must be consistent with the established design language of the application.

## 3. User Interface Enhancement Goals

#### Integration with Existing UI
The public-facing MVP will establish the definitive "v1" design system for the project. We will use **shadcn/ui** components as the foundation to ensure a consistent and high-quality look and feel.

#### Modified/New Screens and Views
*   Login & Registration Pages
*   Main Dashboard (for viewing and managing tracked URLs)
*   A form for adding/editing a tracked URL
*   User Account/Settings Page (primarily for connecting a Telegram account)

#### UI Consistency Requirements
A consistent look and feel must be maintained across all screens, including colors, typography, spacing, and component styles. The user flow must be logical, simple, and seamless.

## 4. Technical Constraints and Integration Requirements

#### Existing Technology Stack
| Category | Technology |
| :--- | :--- |
| **Backend** | Django, Django Ninja, Celery, PostgreSQL |
| **Frontend** | React, Vite, TypeScript, TanStack Router & Query |
| **Deployment** | Docker, Docker Compose |
| **Tooling** | pnpm, uv/poetry, ruff, mypy, pytest, vitest |

#### Integration Approach
*   **Database Integration**: All schema changes **must** be accompanied by a Django migration file.
*   **API Integration**: The frontend will communicate with the backend exclusively through the established Django Ninja REST API.
*   **Testing Integration**: New backend code must include `pytest` tests. New frontend logic must be covered by `vitest` tests.

## 5. Epic and Story Structure

This entire effort will be managed as a **single, comprehensive epic** to track our overall progress towards the public launch goal.

## 6. Epic: MVP Public Launch

**Epic Goal**: To transform the existing closed-beta application into a stable, secure, and polished product ready for a public launch, delivering all features defined in the MVP scope.

### Story Sequence
1.  **Story 1.1: API Contract Finalization**: As a Senior Developer, I want to review and finalize the public API contract (OpenAPI spec), so that the frontend and backend teams have a stable, agreed-upon definition to work against.
2.  **Story 1.2: Monetization Hook Implementation**: As a Product Owner, I want to add a `tier` field to the user model in the backend, so that we can easily introduce premium features and monetization in the future.
3.  **Story 1.3: Public User Authentication UI**: As a new user, I want to create an account and log in through a polished web interface, so that I can securely access the application.
4.  **Story 1.4: Core URL Management UI**: As an authenticated user, I want to use the web dashboard to add, view, and delete the URLs I want to track, so that I can manage my notification targets.
5.  **Story 1.5: Telegram Account Connection UI**: As an authenticated user, I want to connect my Telegram account through the web dashboard, so that the system knows where to send my notifications.
6.  **Story 1.6: Legal Links UI**: As a new or existing user, I want to easily find and access the Terms of Service and Privacy Policy, so that I can understand my rights and the rules of the service.
7.  **Story 1.7: End-to-End Notification Validation**: As a user with a tracked URL, I want to receive a timely notification on Telegram when a new offer is detected, so that I can be confident the core functionality of the service is working.
8.  **Story 1.8: Staging Environment Deployment**: As the Product Owner, I want the entire application to be deployed to a staging environment that mirrors production, so that we can perform final testing and validation before the public launch.
